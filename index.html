<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard de Vulnerabilidades</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    <div class="sidebar">
        <div>
            <div class="logo-box">
                <img src="assets/logo.png" alt="Logo"
                    style="height: 45px; vertical-align: middle; margin-right: 8px;" />
                <img src="assets/zvulny_blue.png" alt="zVulny" style="height: 36px; vertical-align: middle;" />
            </div>
            <div class="menu">
                <a href="#">
                    <img src="assets/shield.png" alt="Escanear"
                        style="height: 20px; vertical-align: middle; margin-right: 8px;" />
                    Escanear
                </a>
                <div class="divider"></div>
                <a href="#" class="active">
                    <img src="assets/locate.png" alt="Mapear"
                        style="height: 20px; vertical-align: middle; margin-right: 8px;" />
                    Mapear
                </a>
                <div class="divider"></div>
                <a href="#">
                    <img src="assets/analytics.png" alt="Análise"
                        style="height: 20px; vertical-align: middle; margin-right: 8px;" />
                    Análise
                </a>
                <div class="divider"></div>
                <a href="#">
                    <img src="assets/lamp.png" alt="Sugestão"
                        style="height: 20px; vertical-align: middle; margin-right: 8px;" />
                    Sugestão
                </a>
            </div>
            <a href="#" class="logout">
                <img src="assets/logout.png" alt="Logout"
                    style="height: 20px; vertical-align: middle; margin-right: 8px;" />
                Logout
            </a>
        </div>
    </div>

    <main class="main-content">
        <h1>Dashboard de Vulnerabilidades</h1>

        <!-- Upload CSV -->
        <input type="file" id="csvFile" accept=".csv" class="ficheiro" />

        <!-- Filtro IP -->
        <div id="filtroContainer" style="display:none; margin-top: 15px;">
            <label for="ipSelect"><strong>Filtrar por Host/IP:</strong></label><br />
            <select id="ipSelect">
                <option value="">Todos</option>
            </select>

            <label for="colorSelect" style="margin-left: 16px;">Filtrar Severidade:</label>
            <select id="colorSelect">
                <option value="">Todos</option>
                <option value="red">Crítica (CVSS ≥ 9)</option>
                <option value="orange">Alta (7 ≤ CVSS < 9)</option>
                <option value="green">Média/Baixa (0 < CVSS < 7)</option>
                <option value="gray">Informativa (CVSS = 0)</option>
            </select>
        </div>

        <!-- Gráficos -->
        <div class="graficoAll">
            <canvas id="cvssChart" width="480" height="250"></canvas>
            <canvas id="vulnTypeChart" width="480" height="250"></canvas>
            <canvas id="exploitChart" width="480" height="250"></canvas>
            <canvas id="serviceChart" width="480" height="250"></canvas>
        </div>

        <!-- Tabela timeline (inicialmente oculta) -->
        <table id="timelineTable" border="1"
            style="width: 100%; margin-top: 30px; font-family: 'Poppins', sans-serif; display: none;">
            <thead>
                <tr>
                    <th>Data da Descoberta</th>
                    <th>Título</th>
                    <th>ID da CVE</th>
                </tr>
            </thead>
            <tbody>
                <!-- Será populado dinamicamente pelo JS -->
            </tbody>
        </table>

        <!-- Botão Ver Mais/Tudo/Menos (inicialmente oculto) -->
        <div id="verMaisContainer" class="verMaisContainer" style="display: none;">
            <button id="verMaisBtn" class="verMaisBtn">Ver mais</button>
        </div>

    </main>
    <script src="script.js"></script>
</body>

</html>